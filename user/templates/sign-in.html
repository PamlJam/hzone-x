{% extends 'base.html' %}


{% block title %}
    hzone | ç™»å½•
{% endblock %}

{% block main %}
    <div class="jumbotron">
    <!-- å·¨å¹• -->
        <h1>è®¿å®¢æ‚¨å¥½</h1>
        <p>HZONEæ˜¯ä¸ºå¤§å­¦ç”Ÿå»ºç«‹çš„äº¤æµå¹³å° åœ¨è¿™é‡Œä½ å¯ä»¥...</p>
        <p><a class="btn btn-info btn-lg" href="/user/sign-up" role="button">æš‚æ— å¸å· å…ˆå»æ³¨å†Œ</a></p>
    </div>

    <div class="panel panel-default">
        <div class="panel-body">
            <form id='form' action="/user/sign-in" method='post'>
            <!-- å¡«å†™æ³¨å†Œä¿¡æ¯ -->
            {% csrf_token %}
                <div class="input-group input-group-lg">
                    <span class="input-group-addon">ğŸ˜€</span>
                    <input required id="id_un" name="un" type="text"
                        class="form-control" placeholder="è¾“å…¥ç”¨æˆ·å">
                </div>
                <br>
                <div class="input-group input-group-lg">
                    <span class="input-group-addon">ğŸ”‘</span>
                    <input required id="id_pw" name="pw" type="password"
                    class="form-control" placeholder="è¾“å…¥å¯†ç ">
                </div>
                <br>
                <div class="btn-group btn-group-justified" role="group" aria-label="...">
                    <div class="btn-group" role="group">
                        <button type="submit" class="btn btn-default">ç‚¹å‡»ç™»å½•</button>
                    </div>
                    <div class="btn-group" role="group">
                        <button id='info' type="button" class="btn btn-default">å…¥ç«™é¡»çŸ¥</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
{% endblock %}


{% block js %}
    <script>
        var form = $('#form');
        form.submit(function(){
            var un = $('#id_un').val();
            var pw = $('#id_pw').val();
            $.ajax({
                url : form.attr('href'),
                type : form.attr('method'),
                data:form.serialize(),
                cache:false,
                success:function(context){
                    var s =  context['status'];
                    
                    if (s=='erro'){
                        alert('ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯');
                    }
                    if (s=='succ'){
                        alert('ç™»å½•æˆåŠŸ');
                        window.location.href = "/";
                        // é¡µé¢è·³è½¬
                    }
                },
            });
            return false;
        })
    </script>

    <script>
        $('#info').click(function(){
        // ç‚¹å‡»æŒ‰é’® å¼¹å‡ºçª—å£
            window.open("sign-info", "newwindow", "height=400, width=500, top=200, left=200")
            // è®¾ç½® é¡µåã€å®½é«˜ã€ä½ç½®
        })
    </script>
{% endblock %}